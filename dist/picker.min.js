!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dailyEmojiPicker=e():t.dailyEmojiPicker=e()}(window,function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){var o,n,r;n=[],void 0===(r="function"==typeof(o=function(){function t(t,e,i){function o(){return window.innerWidth||s.documentElement.clientWidth||document.body.clientWidth}function n(t){return t.getBoundingClientRect().top+c-s.documentElement.clientTop}function r(t){return t.getBoundingClientRect().left+l-s.documentElement.clientLeft}var s,c,l;return s=t.ownerDocument,c=window.pageYOffset||s.body.scrollTop,l=window.pageXOffset||s.body.scrollLeft,!((e===window?(window.innerHeight||s.documentElement.clientHeight||document.body.clientHeight)+c:n(e)+e.offsetHeight)<=n(t)-i||(e===window?c:n(e))>=n(t)+i+t.offsetHeight||(e===window?o()+window.pageXOffset:r(e)+o())<=r(t)-i||(e===window?l:r(e))>=r(t)+i+t.offsetWidth)}function e(){var t=new Date;return t.getTime()}function i(t,e){return function(){return t.apply(e,arguments)}}function o(t){r||(n={elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"original",data_srcset:"original-set",class_loading:"loading",class_loaded:"loaded",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null},r=!0),this._settings=function(t,e){var i,o={};for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);for(i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);return o}(n,t),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._handleScrollFn=i(this.handleScroll,this),window.addEventListener("resize",this._handleScrollFn),this.update()}var n,r=!1;return o.prototype._showOnAppear=function(t){function e(){t.removeEventListener("load",i),t.classList.remove(o.class_loading),o.callback_error&&o.callback_error(t)}function i(){null!==o&&(o.callback_load&&o.callback_load(t),t.classList.remove(o.class_loading),t.classList.add(o.class_loaded),t.removeEventListener("load",i),t.removeEventListener("error",e))}var o=this._settings;"IMG"!==t.tagName&&"IFRAME"!==t.tagName||(t.addEventListener("load",i),t.addEventListener("error",e),t.classList.add(o.class_loading)),function(t,e,i){var o=t.tagName,n=t.getAttribute("data-"+i);if("IMG"===o){!function(t,e){var i=t.parentElement;if("PICTURE"===i.tagName)for(var o=0;o<i.children.length;o++){var n=i.children[o];if("SOURCE"===n.tagName){var r=n.getAttribute("data-"+e);r&&n.setAttribute("srcset",r)}}}(t,e);var r=t.getAttribute("data-"+e);return r&&t.setAttribute("srcset",r),void(n&&t.setAttribute("src",n))}"IFRAME"===o?n&&t.setAttribute("src",n):n&&(t.style.backgroundImage="url("+n+")")}(t,o.data_srcset,o.data_src),o.callback_set&&o.callback_set(t)},o.prototype._loopThroughElements=function(){var e,i,o=this._settings,n=this._elements,r=n?n.length:0,s=[];for(e=0;e<r;e++)i=n[e],o.skip_invisible&&null===i.offsetParent||t(i,o.container,o.threshold)&&(this._showOnAppear(i),s.push(e),i.wasProcessed=!0);for(;s.length>0;)n.splice(s.pop(),1),o.callback_processed&&o.callback_processed(n.length);0===r&&this._stopScrollHandler()},o.prototype._purgeElements=function(){var t,e=this._elements,i=e.length,o=[];for(t=0;t<i;t++)e[t].wasProcessed&&o.push(t);for(;o.length>0;)e.splice(o.pop(),1)},o.prototype._startScrollHandler=function(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._handleScrollFn))},o.prototype._stopScrollHandler=function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._handleScrollFn))},o.prototype.handleScroll=function(){var t,o,n;this._settings&&(o=e(),0!==(n=this._settings.throttle)?(t=n-(o-this._previousLoopTime))<=0||t>n?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=o,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(i(function(){this._previousLoopTime=e(),this._loopTimeout=null,this._loopThroughElements()},this),t)):this._loopThroughElements())},o.prototype.update=function(){this._elements=function(t){return Array.prototype.slice.call(t)}(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},o.prototype.destroy=function(){window.removeEventListener("resize",this._handleScrollFn),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null},o})?o.apply(e,n):o)||(t.exports=r)},function(t,e,i){"use strict";i.r(e),i.d(e,"EmojiPicker",function(){return u});var o=i(0),n=i.n(o),r=function(t){!function(t){new n.a(t)}({container:t,elements_selector:".lazy",threshold:50,load_delay:100})},s=function(){function t(){}return t.getElement=function(t){var e=t.name,i=t.relative_path,o=document.createElement("div");o.classList.add("emoji-block__item","js-emoji"),o.setAttribute("data-emoji",e),o.setAttribute("data-src",i);var n=document.createElement("div");return n.classList.add("emoji-block__item-image","lazy"),n.setAttribute("data-original",i),o.append(n),o},t.getContent=function(t,e,i){var o=document.createElement("div");o.classList.add("emoji-block__wrap","js-emoji-group"),o.setAttribute("data-group",t);for(var n=0;n<e.length;n++)o.append(this.getElement(e[n]));return r(o),t===i&&o.classList.add("is-active"),o},t}(),c=function(){function t(){}return t.getElement=function(t){var e=document.createElement("div");e.classList.add("emoji-block__groups-item","js-emoji-panel-item"),e.setAttribute("data-tab",t),t===this.activeGroup&&e.classList.add("is-active");var i=document.createElement("span");return i.classList.add("sprite-"+t),e.append(i),e},t.getContent=function(t,e){this.activeGroup=e;var i=document.createElement("div");i.classList.add("emoji-block__groups","js-emoji-panel");for(var o=0;o<t.length;o++)i.append(this.getElement(t[o]));return i},t}(),l=function(){function t(t,e,i){this.container=t,this.data=e,this.activeGroup=i}return Object.defineProperty(t.prototype,"template",{get:function(){var t=this,e=document.createElement("div");e.classList.add("emoji-block","js-emoji-block");var i=Object.keys(this.data);return i.forEach(function(i){var o=t.data[i];e.append(s.getContent(i,o,t.activeGroup))}),e.append(c.getContent(i,this.activeGroup)),e},enumerable:!1,configurable:!0}),t.prototype.render=function(){this.container.append(this.template)},t}(),a=function(){function t(){}return t.subscribe=function(t){this.handler=t},t.emit=function(t){this.handler&&this.handler(t)},t.unsubscribe=function(){this.handler=null},t}(),u=(i(2),function(){function t(t){this.container=null,this.getEmojiList=t.source,this.onEmojiSelected=t.onSelect,this.defaultActiveGroup=t.defaultActiveGroup||"smiles"}return t.prototype.getActiveGroup=function(){return this.container&&this.container.querySelector(".js-emoji-group.is-active")},t.prototype.getActiveGroupIcon=function(){return this.container&&this.container.querySelector(".js-emoji-panel-item.is-active")},t.prototype.showEmoji=function(){var t=this.getActiveGroup();t&&t.dispatchEvent(new Event("scroll"))},t.prototype.onEmojiClick=function(t){var e=t.getAttribute("data-emoji")||"",i=t.getAttribute("data-src")||"";a.emit({emoji:e,emoji_src:i}),this.hide()},t.prototype.showGroup=function(t){var e=t.getAttribute("data-tab"),i=this.getActiveGroupIcon();i&&i.classList.remove("is-active"),t.classList.add("is-active");var o=this.getActiveGroup();o&&o.classList.remove("is-active");var n=this.container&&this.container.querySelector("[data-group="+e+"]");n&&n.classList.add("is-active"),this.showEmoji()},t.prototype.setEmojiBlock=function(){this.emojiBlock=this.container&&this.container.querySelector(".js-emoji-block")},t.prototype.addListeners=function(){this.setEmojiBlock(),this.emojiBlock&&this.emojiBlock.addEventListener("click",this.clickListener.bind(this)),a.subscribe(this.onEmojiSelected)},t.prototype.clickListener=function(t){var e=t.target;e.closest(".js-emoji-panel")?this.showGroup(e):e.classList.contains("js-emoji")&&this.onEmojiClick(e)},t.prototype.unsubscribeEvents=function(){this.emojiBlock&&this.emojiBlock.removeEventListener("click",this.clickListener),a.unsubscribe()},t.prototype.clear=function(){this.container&&(this.container.innerHTML="")},t.prototype.show=function(){this.emojiBlock&&this.emojiBlock.classList.add("is-show"),this.showEmoji()},t.prototype.hide=function(){this.emojiBlock&&this.emojiBlock.classList.remove("is-show")},t.prototype.render=function(t){(this.unsubscribeEvents(),this.clear(),this.container=t,this.container&&this.emojiMap)&&new l(this.container,this.emojiMap,this.defaultActiveGroup).render();this.addListeners()},t.prototype.destroy=function(){this.unsubscribeEvents()},t.prototype.init=function(){var t=this;this.getEmojiList().then(function(e){t.emojiMap=e})},t}())},function(t,e){}])});