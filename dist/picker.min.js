!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dailyEmojiPicker=e():t.dailyEmojiPicker=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){var n,o,r;o=[],void 0===(r="function"==typeof(n=function(){function t(t,e,i){function n(){return window.innerWidth||s.documentElement.clientWidth||document.body.clientWidth}function o(t){return t.getBoundingClientRect().top+l-s.documentElement.clientTop}function r(t){return t.getBoundingClientRect().left+c-s.documentElement.clientLeft}var s,l,c;return s=t.ownerDocument,l=window.pageYOffset||s.body.scrollTop,c=window.pageXOffset||s.body.scrollLeft,!((e===window?(window.innerHeight||s.documentElement.clientHeight||document.body.clientHeight)+l:o(e)+e.offsetHeight)<=o(t)-i||(e===window?l:o(e))>=o(t)+i+t.offsetHeight||(e===window?n()+window.pageXOffset:r(e)+n())<=r(t)-i||(e===window?c:r(e))>=r(t)+i+t.offsetWidth)}function e(){var t=new Date;return t.getTime()}function i(t,e){return function(){return t.apply(e,arguments)}}function n(t){r||(o={elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"original",data_srcset:"original-set",class_loading:"loading",class_loaded:"loaded",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null},r=!0),this._settings=function(t,e){var i,n={};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}(o,t),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._handleScrollFn=i(this.handleScroll,this),window.addEventListener("resize",this._handleScrollFn),this.update()}var o,r=!1;return n.prototype._showOnAppear=function(t){function e(){t.removeEventListener("load",i),t.classList.remove(n.class_loading),n.callback_error&&n.callback_error(t)}function i(){null!==n&&(n.callback_load&&n.callback_load(t),t.classList.remove(n.class_loading),t.classList.add(n.class_loaded),t.removeEventListener("load",i),t.removeEventListener("error",e))}var n=this._settings;"IMG"!==t.tagName&&"IFRAME"!==t.tagName||(t.addEventListener("load",i),t.addEventListener("error",e),t.classList.add(n.class_loading)),function(t,e,i){var n=t.tagName,o=t.getAttribute("data-"+i);if("IMG"===n){!function(t,e){var i=t.parentElement;if("PICTURE"===i.tagName)for(var n=0;n<i.children.length;n++){var o=i.children[n];if("SOURCE"===o.tagName){var r=o.getAttribute("data-"+e);r&&o.setAttribute("srcset",r)}}}(t,e);var r=t.getAttribute("data-"+e);return r&&t.setAttribute("srcset",r),void(o&&t.setAttribute("src",o))}"IFRAME"===n?o&&t.setAttribute("src",o):o&&(t.style.backgroundImage="url("+o+")")}(t,n.data_srcset,n.data_src),n.callback_set&&n.callback_set(t)},n.prototype._loopThroughElements=function(){var e,i,n=this._settings,o=this._elements,r=o?o.length:0,s=[];for(e=0;e<r;e++)i=o[e],n.skip_invisible&&null===i.offsetParent||t(i,n.container,n.threshold)&&(this._showOnAppear(i),s.push(e),i.wasProcessed=!0);for(;s.length>0;)o.splice(s.pop(),1),n.callback_processed&&n.callback_processed(o.length);0===r&&this._stopScrollHandler()},n.prototype._purgeElements=function(){var t,e=this._elements,i=e.length,n=[];for(t=0;t<i;t++)e[t].wasProcessed&&n.push(t);for(;n.length>0;)e.splice(n.pop(),1)},n.prototype._startScrollHandler=function(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._handleScrollFn))},n.prototype._stopScrollHandler=function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._handleScrollFn))},n.prototype.handleScroll=function(){var t,n,o;this._settings&&(n=e(),0!==(o=this._settings.throttle)?(t=o-(n-this._previousLoopTime))<=0||t>o?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=n,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(i(function(){this._previousLoopTime=e(),this._loopTimeout=null,this._loopThroughElements()},this),t)):this._loopThroughElements())},n.prototype.update=function(){this._elements=function(t){return Array.prototype.slice.call(t)}(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},n.prototype.destroy=function(){window.removeEventListener("resize",this._handleScrollFn),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null},n})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){"use strict";i.r(e),i.d(e,"EmojiPicker",function(){return u});var n=i(0),o=i.n(n),r=function(t){!function(t){new o.a(t)}({container:t,elements_selector:".lazy",threshold:50,load_delay:100})},s=function(){function t(){}return t.getElement=function(t){var e=t.name,i=t.relative_path,n=document.createElement("div");n.classList.add("emoji-block__item","js-emoji"),n.setAttribute("data-emoji",e),n.setAttribute("data-src",i);var o=document.createElement("div");return o.classList.add("emoji-block__item-image","lazy"),o.setAttribute("data-original",i),n.append(o),n},t.getContent=function(t,e,i){var n=document.createElement("div");n.classList.add("emoji-block__wrap","js-emoji-group"),n.setAttribute("data-group",t);for(var o=0;o<e.length;o++)n.append(this.getElement(e[o]));return r(n),t===i&&n.classList.add("is-active"),n},t}(),l=function(){function t(){}return t.getElement=function(t){var e=document.createElement("div");e.classList.add("emoji-block__groups-item","js-emoji-panel-item"),e.setAttribute("data-tab",t),t===this.activeGroup&&e.classList.add("is-active");var i=document.createElement("span");return i.classList.add("sprite-"+t),e.append(i),e},t.getContent=function(t,e){this.activeGroup=e;var i=document.createElement("div");i.classList.add("emoji-block__groups","js-emoji-panel");for(var n=0;n<t.length;n++)i.append(this.getElement(t[n]));return i},t}(),c=function(){function t(t,e,i){this.container=t,this.data=e,this.activeGroup=i}return Object.defineProperty(t.prototype,"template",{get:function(){var t=this,e=document.createElement("div");e.classList.add("emoji-block","js-emoji-block");var i=Object.keys(this.data);return i.forEach(function(i){var n=t.data[i];e.append(s.getContent(i,n,t.activeGroup))}),e.append(l.getContent(i,this.activeGroup)),e},enumerable:!1,configurable:!0}),t.prototype.render=function(){this.container.append(this.template)},t}(),a=function(){function t(){}return t.subscribe=function(t){this.handler=t},t.emit=function(t){this.handler&&this.handler(t)},t.unsubscribe=function(){this.handler=null},t}(),u=(i(2),function(){function t(t){this.container=null,this.getEmojiList=t.source,this.onEmojiSelected=t.onSelect,this.defaultActiveGroup=t.defaultActiveGroup||"smiles"}return t.prototype.getActiveGroup=function(){return this.container&&this.container.querySelector(".js-emoji-group.is-active")},t.prototype.getActiveGroupIcon=function(){return this.container&&this.container.querySelector(".js-emoji-panel-item.is-active")},t.prototype.showEmoji=function(){var t=this.getActiveGroup();t&&t.dispatchEvent(new Event("scroll"))},t.prototype.onEmojiClick=function(t){var e=t.getAttribute("data-emoji")||"",i=t.getAttribute("data-src")||"";a.emit({emoji:e,emoji_src:i}),this.hide()},t.prototype.showGroup=function(t){var e=t.getAttribute("data-tab"),i=this.getActiveGroupIcon();i&&i.classList.remove("is-active"),t.classList.add("is-active");var n=this.getActiveGroup();n&&n.classList.remove("is-active");var o=this.container&&this.container.querySelector("[data-group="+e+"]");o&&o.classList.add("is-active"),this.showEmoji()},t.prototype.setEmojiBlock=function(){this.emojiBlock=this.container&&this.container.querySelector(".js-emoji-block")},t.prototype.addListeners=function(){var t;this.setEmojiBlock(),null===(t=this.emojiBlock)||void 0===t||t.addEventListener("click",this.clickListener.bind(this)),a.subscribe(this.onEmojiSelected)},t.prototype.clickListener=function(t){var e=t.target;e.closest(".js-emoji-panel")?this.showGroup(e):e.classList.contains("js-emoji")&&this.onEmojiClick(e)},t.prototype.unsubscribeEvents=function(){var t;null===(t=this.emojiBlock)||void 0===t||t.removeEventListener("click",this.clickListener),a.unsubscribe()},t.prototype.show=function(){var t;null===(t=this.emojiBlock)||void 0===t||t.classList.add("is-show")},t.prototype.hide=function(){var t;null===(t=this.emojiBlock)||void 0===t||t.classList.remove("is-show")},t.prototype.render=function(t){(this.unsubscribeEvents(),this.container=t,this.container&&this.emojiMap)&&new c(this.container,this.emojiMap,this.defaultActiveGroup).render();this.addListeners()},t.prototype.destroy=function(){this.unsubscribeEvents()},t.prototype.init=function(){var t=this;this.getEmojiList().then(function(e){t.emojiMap=e})},t}())},function(t,e){}])});